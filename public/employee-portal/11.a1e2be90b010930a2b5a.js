(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{X3zk:function(r,o,t){"use strict";t.r(o),t.d(o,"LoginModule",(function(){return L}));var e=t("ofXK"),n=t("tyNb"),s=t("3Pt+"),l=t("Wje7"),c=t("fXoL");let i=(()=>{class r{constructor(){}checkFieldLength(r,o=0,t=0){return!!r&&(r.length<o||r.length>t||void 0)}validateEmail(r){return!!r&&!/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(r).toLowerCase())}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=c.Kb({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var a=t("IYfF"),d=t("5eHb"),u=t("Cu7F"),b=t("Wp6s"),m=t("kmnG"),w=t("qFsG"),p=t("NFeN"),f=t("bTqV"),h=t("4rEt");function g(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Please enter a valid email address "),c.Tb())}function C(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Email is "),c.Ub(2,"strong"),c.Gc(3,"required"),c.Tb(),c.Tb())}function P(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Email length must be less than "),c.Ub(2,"strong"),c.Gc(3,"50"),c.Tb(),c.Tb())}function T(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Password is "),c.Ub(2,"strong"),c.Gc(3,"required"),c.Tb(),c.Tb())}function v(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Password length must be between "),c.Ub(2,"strong"),c.Gc(3,"6 & 30"),c.Tb(),c.Tb())}function U(r,o){if(1&r){const r=c.Vb();c.Ub(0,"mat-card"),c.Ub(1,"form",6),c.Ub(2,"mat-form-field"),c.Ub(3,"mat-label"),c.Gc(4,"Email"),c.Tb(),c.Pb(5,"input",7),c.Ec(6,g,2,0,"mat-error",5),c.Ec(7,C,4,0,"mat-error",5),c.Ec(8,P,4,0,"mat-error",5),c.Tb(),c.Ub(9,"mat-form-field"),c.Ub(10,"mat-label"),c.Gc(11,"Password"),c.Tb(),c.Pb(12,"input",8),c.Ec(13,T,4,0,"mat-error",5),c.Ec(14,v,4,0,"mat-error",5),c.Ub(15,"mat-icon",9),c.bc("click",(function(o){return c.vc(r),c.fc().showHidePwd(0,o)})),c.Gc(16,"remove_red_eye"),c.Tb(),c.Tb(),c.Ub(17,"div",10),c.Ub(18,"button",11),c.bc("click",(function(){return c.vc(r),c.fc().login()}))("keypress.enter",(function(){return c.vc(r),c.fc().login()})),c.Gc(19,"SIGN IN"),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&r){const r=c.fc();c.Bb(1),c.lc("formGroup",r.loginForm),c.Bb(5),c.lc("ngIf",(null==r.controls||null==r.controls.email||null==r.controls.email.errors?null:r.controls.email.errors.email)&&!(null!=r.controls&&null!=r.controls.email&&null!=r.controls.email.errors&&r.controls.email.errors.required)&&!(null!=r.controls&&null!=r.controls.email&&null!=r.controls.email.errors&&r.controls.email.errors.maxlength)),c.Bb(1),c.lc("ngIf",null==r.controls||null==r.controls.email||null==r.controls.email.errors?null:r.controls.email.errors.required),c.Bb(1),c.lc("ngIf",null==r.controls||null==r.controls.email||null==r.controls.email.errors?null:r.controls.email.errors.maxlength),c.Bb(4),c.lc("type",r.pwdShowHide[0]?"text":"password"),c.Bb(1),c.lc("ngIf",null==r.controls||null==r.controls.password||null==r.controls.password.errors?null:r.controls.password.errors.required),c.Bb(1),c.lc("ngIf",((null==r.controls||null==r.controls.password||null==r.controls.password.errors?null:r.controls.password.errors.minlength)||(null==r.controls||null==r.controls.password||null==r.controls.password.errors?null:r.controls.password.errors.maxlength))&&(null==r.controls||null==r.controls.password?null:r.controls.password.touched)),c.Bb(1),c.lc("ngClass",r.pwdShowHide[0]?"red-clr":""),c.Bb(3),c.lc("disabled",r.loginForm.invalid)}}function E(r,o){if(1&r&&(c.Ub(0,"p",19),c.Gc(1),c.Tb()),2&r){const r=c.fc(2);c.Bb(1),c.Ic("Code has been sent to: ",r.number,"")}}function G(r,o){if(1&r){const r=c.Vb();c.Ub(0,"mat-card"),c.Ub(1,"div",12),c.Ec(2,E,2,1,"p",13),c.Ub(3,"otp",14),c.bc("onValueChange",(function(o){return c.vc(r),c.fc().onOtpChange(o)})),c.Tb(),c.Ub(4,"div",15),c.Ub(5,"p",16),c.bc("click",(function(){return c.vc(r),c.fc().reSendOtp()})),c.Ub(6,"b"),c.Gc(7,"Resend?"),c.Tb(),c.Tb(),c.Ub(8,"p",17),c.Gc(9),c.Tb(),c.Tb(),c.Tb(),c.Ub(10,"div",10),c.Ub(11,"button",18),c.bc("click",(function(){c.vc(r);const o=c.fc();return o.step=1,o.resetStep1()})),c.Gc(12,"GOTO LOGIN"),c.Tb(),c.Ub(13,"button",11),c.bc("click",(function(){return c.vc(r),c.fc().verifyOtp()}))("keypress.enter",(function(){return c.vc(r),c.fc().verifyOtp()})),c.Gc(14,"VERIFY"),c.Tb(),c.Tb(),c.Tb()}if(2&r){const r=c.fc();c.Bb(2),c.lc("ngIf",r.number),c.Bb(1),c.lc("setting",r.settings),c.Bb(2),c.lc("ngClass",r.counter>0?"disableResend":""),c.Bb(3),c.lc("hidden",0==r.counter),c.Bb(1),c.Hc(r.counter),c.Bb(4),c.lc("disabled",r.checkOtpBtn())}}function I(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Please enter a valid email address "),c.Tb())}function B(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Email is "),c.Ub(2,"strong"),c.Gc(3,"required"),c.Tb(),c.Tb())}function k(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Email length must be less than "),c.Ub(2,"strong"),c.Gc(3,"50"),c.Tb(),c.Tb())}function y(r,o){if(1&r){const r=c.Vb();c.Ub(0,"mat-card"),c.Ub(1,"mat-form-field"),c.Ub(2,"mat-label"),c.Gc(3,"Email"),c.Tb(),c.Pb(4,"input",20),c.Ec(5,I,2,0,"mat-error",5),c.Ec(6,B,4,0,"mat-error",5),c.Ec(7,k,4,0,"mat-error",5),c.Tb(),c.Ub(8,"div",10),c.Ub(9,"button",18),c.bc("click",(function(){c.vc(r);const o=c.fc();return o.step=1,o.resetStep1()})),c.Gc(10,"BACK"),c.Tb(),c.Ub(11,"button",11),c.bc("click",(function(){return c.vc(r),c.fc().sendOtp()}))("keypress.enter",(function(){return c.vc(r),c.fc().sendOtp()})),c.Gc(12,"CONFIRM"),c.Tb(),c.Tb(),c.Tb()}if(2&r){const r=c.fc();c.Bb(4),c.lc("formControl",r.forgotEmailControl),c.Bb(1),c.lc("ngIf",(null==r.forgotEmailControl||null==r.forgotEmailControl.errors?null:r.forgotEmailControl.errors.email)&&!(null!=r.forgotEmailControl&&null!=r.forgotEmailControl.errors&&r.forgotEmailControl.errors.required)&&!(null!=r.forgotEmailControl&&null!=r.forgotEmailControl.errors&&r.forgotEmailControl.errors.maxlength)),c.Bb(1),c.lc("ngIf",null==r.forgotEmailControl||null==r.forgotEmailControl.errors?null:r.forgotEmailControl.errors.required),c.Bb(1),c.lc("ngIf",null==r.forgotEmailControl||null==r.forgotEmailControl.errors?null:r.forgotEmailControl.errors.maxlength),c.Bb(4),c.lc("disabled",null==r.forgotEmailControl?null:r.forgotEmailControl.invalid)}}function F(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Password is "),c.Ub(2,"strong"),c.Gc(3,"required"),c.Tb(),c.Tb())}function O(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Password must contain 1 uppercase, 1 lowercase, number and special character "),c.Tb())}function x(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Password length must be between "),c.Ub(2,"strong"),c.Gc(3,"6 & 30"),c.Tb(),c.Tb())}function S(r,o){1&r&&(c.Ub(0,"mat-error"),c.Gc(1," Password doesn't "),c.Ub(2,"strong"),c.Gc(3,"match"),c.Tb(),c.Tb())}function N(r,o){if(1&r){const r=c.Vb();c.Ub(0,"mat-card"),c.Ub(1,"form",6),c.Ub(2,"mat-form-field"),c.Ub(3,"mat-label"),c.Gc(4,"New Password"),c.Tb(),c.Pb(5,"input",21),c.Ec(6,F,4,0,"mat-error",5),c.Ec(7,O,2,0,"mat-error",5),c.Ec(8,x,4,0,"mat-error",5),c.Ub(9,"mat-icon",9),c.bc("click",(function(o){return c.vc(r),c.fc().showHidePwd(1,o)})),c.Gc(10,"remove_red_eye"),c.Tb(),c.Tb(),c.Ub(11,"mat-form-field"),c.Ub(12,"mat-label"),c.Gc(13,"Confirm Password"),c.Tb(),c.Pb(14,"input",22),c.Ec(15,S,4,0,"mat-error",5),c.Ub(16,"mat-icon",9),c.bc("click",(function(o){return c.vc(r),c.fc().showHidePwd(2,o)})),c.Gc(17,"remove_red_eye"),c.Tb(),c.Tb(),c.Ub(18,"div",10),c.Ub(19,"button",11),c.bc("click",(function(){return c.vc(r),c.fc().setNewPwd()}))("keypress.enter",(function(){return c.vc(r),c.fc().setNewPwd()})),c.Gc(20,"CONFIRM"),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&r){const r=c.fc();c.Bb(1),c.lc("formGroup",r.newPasswordForm),c.Bb(4),c.lc("type",r.pwdShowHide[1]?"text":"password"),c.Bb(1),c.lc("ngIf",null==r.pwdControls||null==r.pwdControls.newPassword||null==r.pwdControls.newPassword.errors?null:r.pwdControls.newPassword.errors.required),c.Bb(1),c.lc("ngIf",(null==r.pwdControls||null==r.pwdControls.newPassword||null==r.pwdControls.newPassword.errors?null:r.pwdControls.newPassword.errors.pattern)&&(null==r.pwdControls||null==r.pwdControls.newPassword?null:r.pwdControls.newPassword.touched)&&!(null!=r.pwdControls&&null!=r.pwdControls.newPassword&&null!=r.pwdControls.newPassword.errors&&r.pwdControls.newPassword.errors.minlength||null!=r.pwdControls&&null!=r.pwdControls.newPassword&&null!=r.pwdControls.newPassword.errors&&r.pwdControls.newPassword.errors.maxlength)),c.Bb(1),c.lc("ngIf",((null==r.pwdControls||null==r.pwdControls.newPassword||null==r.pwdControls.newPassword.errors?null:r.pwdControls.newPassword.errors.minlength)||(null==r.pwdControls||null==r.pwdControls.newPassword||null==r.pwdControls.newPassword.errors?null:r.pwdControls.newPassword.errors.maxlength))&&(null==r.pwdControls||null==r.pwdControls.newPassword?null:r.pwdControls.newPassword.touched)),c.Bb(1),c.lc("ngClass",r.pwdShowHide[1]?"red-clr":""),c.Bb(5),c.lc("type",r.pwdShowHide[2]?"text":"password"),c.Bb(1),c.lc("ngIf",(null==r.pwdControls||null==r.pwdControls.confirmPassword?null:r.pwdControls.confirmPassword.touched)&&(null==r.pwdControls||null==r.pwdControls.confirmPassword||null==r.pwdControls.confirmPassword.errors?null:r.pwdControls.confirmPassword.errors.mustMatch)),c.Bb(1),c.lc("ngClass",r.pwdShowHide[2]?"red-clr":""),c.Bb(3),c.lc("disabled",r.confirmPwdCheck())}}const H=[{path:"",component:(()=>{class r{constructor(r,o,t,e,n,l){this.router=r,this.formBuilder=o,this.validationService=t,this.authService=e,this.toaster=n,this.globalFunctions=l,this.matIconNames=[],this.step=1,this.selectedIconIndex=null,this.settings={length:4,numbersOnly:!0,btnClass:"hideTimer"},this.otpCode="",this.counterTime=60,this.verifyCode="",this.wrongIconClickCount=0,this.number="",this.pwdShowHide=[!1,!1,!1],this.forgotEmailControl=new s.e("",[s.s.required,s.s.email,s.s.maxLength(50)])}showHidePwd(r,o){this.pwdShowHide[r]=!this.pwdShowHide[r],o.stopPropagation()}ngOnInit(){localStorage.clear(),this.loginForm=this.formBuilder.group({email:["",[s.s.required,s.s.email,s.s.maxLength(50)]],password:["",[s.s.required,s.s.minLength(6),s.s.maxLength(30)]]}),this.newPasswordForm=this.formBuilder.group({newPassword:["",[s.s.required,s.s.minLength(6),s.s.maxLength(30),s.s.pattern(l.a.passwordRegex)]],confirmPassword:[""]},{validator:this.globalFunctions.comparePassword("newPassword","confirmPassword")}),this.resetStep1()}ngOnDestroy(){clearInterval(this.countDownRef)}resetStep1(){this.pwdShowHide=[!1,!1,!1],this.loginForm.get("password").reset(),this.loginForm.markAsUntouched(),this.loginForm.markAsPristine(),this.newPasswordForm.reset(),this.newPasswordForm.markAsPristine(),this.newPasswordForm.markAsUntouched(),this.forgotEmailControl.reset()}get title(){let r="";switch(this.step){case 1:r="Log on to your account";break;case 2:r="OTP CODE";break;case 3:r="Forgot password?";break;case 4:r="Reset your password";break;default:r=""}return r}onOtpChange(r){2===this.step?this.otpCode=r:this.verifyCode=r}checkOtpBtn(){return 2===this.step?!this.otpCode.length||this.otpCode.length<4:!this.verifyCode.length||this.verifyCode.length<4}goToDashboard(r){this.authService.storeUserData(r.token,r.user,r.permissions),this.router.navigate(["/home"])}get controls(){return this.loginForm.controls}get pwdControls(){return this.newPasswordForm.controls}confirmPwdCheck(){return!!this.newPasswordForm.invalid}startCountDown(r){r<=0||(clearInterval(this.countDownRef),this.counter=r,this.countDownRef=setInterval(()=>{this.counter--,0==this.counter&&clearInterval(this.countDownRef)},1e3))}login(){this.authService.login(this.loginForm.value).subscribe(r=>{r.data&&r.data.twoFA?(this.toaster.success(r.message),this.step=5,this.startCountDown(this.counterTime),this.number=r.data.number):(this.toaster.success(r.message),this.goToDashboard(r.data))},r=>{if(r.error){let o=r.error.message;return r.error.data.remaining_time&&(o=o+" Remaining time: "+this.transform(r.error.data.remaining_time)),void this.toaster.error(o)}"string"==typeof r?this.toaster.error(r):r[0]&&this.toaster.error(r[0])})}verifyOtpForLogin(){this.loginForm.value.code=this.verifyCode}sendOtp(){}reSendOtp(){this.counter>0||2===this.step||this.login()}verifyOtp(){2===this.step?this.verifyOtpForResetPwd():this.verifyOtpForLogin()}verifyOtpForResetPwd(){}setNewPwd(){this.newPasswordForm.get("newPassword"),this.newPasswordForm.get("confirmPassword")}transform(r){if(r>=60){const o=Math.floor(r/60);return o+"m : "+(r-60*o)+"s"}return r+"s"}}return r.\u0275fac=function(o){return new(o||r)(c.Ob(n.f),c.Ob(s.d),c.Ob(i),c.Ob(a.a),c.Ob(d.b),c.Ob(u.a))},r.\u0275cmp=c.Ib({type:r,selectors:[["app-login"]],decls:13,vars:5,consts:[[1,"login-main-screen"],[1,"login-inner-screen"],[1,"login-head"],["src","assets/img/admin-icon.png","alt",""],[1,"login-body"],[4,"ngIf"],[3,"formGroup"],["type","email","matInput","","formControlName","email","placeholder","Ex. pat@example.com"],["matInput","","formControlName","password","placeholder","password",3,"type"],["matSuffix","",1,"cursor-pointer","hover-effect",3,"ngClass","click"],[1,"auth-btn"],["mat-raised-button","",1,"btn","btn-danger",3,"disabled","click","keypress.enter"],[1,"text-center","mb-20"],["class","code-sent-txt",4,"ngIf"],[3,"setting","onValueChange"],[1,"text-center"],[1,"mr-2",3,"ngClass","click"],[1,"cursor-none",3,"hidden"],["mat-raised-button","",1,"btn",3,"click"],[1,"code-sent-txt"],["type","email","matInput","","placeholder","Email",3,"formControl"],["autocomplete","off","formControlName","newPassword","matInput","","placeholder","New Password",3,"type"],["autocomplete","off","formControlName","confirmPassword","matInput","","placeholder","New Password",3,"type"]],template:function(r,o){1&r&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"div",2),c.Ub(3,"h2"),c.Pb(4,"img",3),c.Gc(5," Employee Portal"),c.Tb(),c.Ub(6,"h4"),c.Gc(7),c.Tb(),c.Tb(),c.Ub(8,"div",4),c.Ec(9,U,20,9,"mat-card",5),c.Ec(10,G,15,6,"mat-card",5),c.Ec(11,y,13,5,"mat-card",5),c.Ec(12,N,21,10,"mat-card",5),c.Tb(),c.Tb(),c.Tb()),2&r&&(c.Bb(7),c.Hc(o.title),c.Bb(2),c.lc("ngIf",1===o.step),c.Bb(1),c.lc("ngIf",2===o.step||5===o.step),c.Bb(1),c.lc("ngIf",3===o.step),c.Bb(1),c.lc("ngIf",4===o.step))},directives:[e.m,b.a,s.t,s.p,s.i,m.c,m.f,w.b,s.c,s.o,s.g,p.a,m.g,e.k,f.a,m.b,h.b,s.f],styles:[".reset-icon-text{color:#f53d30;text-align:center;border:1px solid hsla(0,0%,66.3%,.34901960784313724);padding:20px;margin-top:20px;border-radius:10px}.tooltip-red{color:#fff!important;background:#b71c1c!important;font-size:10px!important}"],encapsulation:2}),r})()}];var q=t("Qu3c");let L=(()=>{class r{}return r.\u0275mod=c.Mb({type:r}),r.\u0275inj=c.Lb({factory:function(o){return new(o||r)},imports:[[e.c,w.c,f.b,m.e,b.b,p.b,s.j,s.r,h.a,q.b,n.j.forChild(H)]]}),r})()}}]);